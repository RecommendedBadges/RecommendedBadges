<template>
    <lightning-card title={cardTitle}>
        <c-error></c-error>
        <lightning-record-edit-form lwc:if={objectApiName} object-api-name={objectApiName} record-id={recordId} form-class="slds-var-p-around_small" 
            onload={handleLoad} onsubmit={handleSubmit} onsuccess={handleSuccess}>
            <div class="slds-grid slds-wrap slds-gutters_direct">
                <lightning-messages class="slds-col slds-size_1-of-1"></lightning-messages>
            
                <c-lookup class="slds-col slds-size_1-of-2 slds-medium-size_1-of-1 slds-large-size_1-of-2 inputMargin" object-name={lookupObjectName} 
                    result-icon-name={lookupResultIconName} lookup-items={lookupItems} placeholder={lookupPlaceholder} selected-id={selectedLookupId} required two-column-layout 
                    onitemselect={handleLookupSelect}>
                </c-lookup>
                <template for:each={recordFields} for:item="field">
                    <lightning-input-field class="slds-col slds-size_1-of-2 slds-medium-size_1-of-1 slds-large-size_1-of-2" key={field.key} field-name={field.fieldApiName}>
                    </lightning-input-field>
                </template>
            </div>
            
            <br/>
            <div class="slds-grid slds-wrap slds-grid_align-center">
                <lightning-button class="slds-col slds-grow-none slds-var-m-right_xxx-small" type="reset" label="Cancel" onclick={handleCancel}></lightning-button>
                <lightning-button class="slds-col slds-grow-none" type="submit" label="Save & New" onclick={handleSaveAndNew}></lightning-button>
                <lightning-button class="slds-col slds-grow-none slds-var-m-left_xxx-small" variant="brand" type="submit" label="Save" onclick={handleSave}></lightning-button>
            </div>
        </lightning-record-edit-form>
    </lightning-card>
</template>